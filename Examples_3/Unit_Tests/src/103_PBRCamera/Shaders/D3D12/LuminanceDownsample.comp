RWTexture2D<float> LuminanceCurMip : register(u0, UPDATE_FREQ_PER_DRAW);

Texture2D<float> LuminancePrevMip : register(t0, UPDATE_FREQ_PER_DRAW);

[numthreads(1, 1, 1)]
void main(uint3 DTid : SV_DispatchThreadID)
{
	uint3 xyz = uint3(DTid.xy, 0u);
	float result = LuminancePrevMip.Load(xyz);
	result += LuminancePrevMip.Load(xyz, int2(0, 1));
	result += LuminancePrevMip.Load(xyz, int2(1, 0));
	result += LuminancePrevMip.Load(xyz, int2(1, 1));
	
	LuminanceCurMip[DTid.xy] = result * 0.25f;
}
